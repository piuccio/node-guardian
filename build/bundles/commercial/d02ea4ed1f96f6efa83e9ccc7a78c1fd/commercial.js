"format register";!function(){function t(){}t.amd={},System.register("common/modules/commercial/comment-adverts",["github:wilsonpage/fastdom@0.8.6","github:guardian/native-promise-only@0.7.6-e","common/utils/_","common/utils/$","common/utils/config","common/utils/mediator","common/modules/identity/api","common/modules/experiments/ab","common/modules/commercial/create-ad-slot"],!1,function(t,e,n){return function(t,e,n,o,i,s,r,a,c){function l(l){var u,d,m,p=n.defaults(l||{},{adSlotContainerSelector:".js-discussion__ad-slot",commentMainColumn:".content__main-column"}),h=function(){var t=a.getParticipations().MtRec1,e=a.getParticipations().MtRec2;return a.testCanBeRun("MtRec1")&&t&&"A"===t.variant||a.testCanBeRun("MtRec2")&&e&&"A"===e.variant};d=o(p.adSlotContainerSelector),m=o(p.commentMainColumn,".js-comments"),s.once("modules:comments:renderComments:rendered",function(){return i.switches.standardAdverts&&h()&&d.length&&i.switches.discussion&&r.isUserLoggedIn()&&!(m.dim().height<280)?(m.addClass("discussion__ad-wrapper"),new e(function(e){t.read(function(){u="comments",t.write(function(){d.append(c(u,"mpu-banner-ad")),e(d)})})})):!1})}return{init:l}}.call(this,t("github:wilsonpage/fastdom@0.8.6"),t("github:guardian/native-promise-only@0.7.6-e"),t("common/utils/_"),t("common/utils/$"),t("common/utils/config"),t("common/utils/mediator"),t("common/modules/identity/api"),t("common/modules/experiments/ab"),t("common/modules/commercial/create-ad-slot"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/front-commercial-components",["npm:bonzo@1.4.0","common/utils/$","common/utils/config","common/modules/commercial/create-ad-slot"],!1,function(t,e,n){return function(t,e,n,o){function i(){if(!n.switches.commercialComponents||!n.page.isFront)return!1;var i,s=e.create('<div class="fc-container"></div>'),r=t(o("merchandising-high","commercial-component-high")),a=e(".fc-container");return a.length>=2?(i=0,a.length>=4&&(i="Network Front"===n.page.contentType?3:2),s.append(r).insertAfter(a[i])):void 0}return{init:i}}.call(this,t("npm:bonzo@1.4.0"),t("common/utils/$"),t("common/utils/config"),t("common/modules/commercial/create-ad-slot"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/msie-audit",["npm:bonzo@1.4.0","common/utils/$","common/utils/config","common/modules/analytics/beacon","common/utils/detect","common/utils/_"],!1,function(t,e,n){return function(t,e,n,o,i,s){function r(){return n.switches.msieAudit?void("MSIE"===i.getUserAgent.browser&&(s.once(function(){o.beaconCounts("msie-browser")})(),s.delay(function(){i.adblockInUse&&o.beaconCounts("msie-adblock")},3e3))):!1}return{init:r}}.call(this,t("npm:bonzo@1.4.0"),t("common/utils/$"),t("common/utils/config"),t("common/modules/analytics/beacon"),t("common/utils/detect"),t("common/utils/_"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/slice-adverts",["npm:bonzo@1.4.0","github:wilsonpage/fastdom@0.8.6","npm:qwery@3.4.2","github:guardian/native-promise-only@0.7.6-e","common/utils/$","common/utils/_","common/utils/config","common/modules/commercial/create-ad-slot","common/modules/user-prefs"],!1,function(t,e,n){return function(t,e,n,o,i,s,r,a,c){var l=["inline1","inline2","inline3"],u=function(u){if(!r.switches.standardAdverts)return!1;for(var d,m,p,h,f=s.defaults(u||{},{containerSelector:".fc-container",sliceSelector:".js-fc-slice-mpu-candidate"}),g=n(f.containerSelector),v=0,y=[],b=1,w=c.get("container-states");v<g.length;)d=g[v],m=t(d).data("id"),p=i(f.sliceSelector,d),h=s.contains(["uk","us","au"],r.page.pageId)&&0===v,!p.length||h||w&&"closed"===w[m]?v++:(y.push(p.first()),v+=b+1);return o.all(s(y).slice(0,l.length).map(function(n,s){var r=l[s],c=t(a(r,"container-inline")).addClass("ad-slot--mobile"),u=t(a(r,"container-inline")).addClass("ad-slot--not-mobile");return new o(function(t){e.write(function(){n.removeClass("fc-slice__item--no-mpu").append(u),c.insertAfter(i.ancestor(n[0],"fc-container")),t(null)})})}).valueOf()).then(function(){return y})};return{init:u}}.call(this,t("npm:bonzo@1.4.0"),t("github:wilsonpage/fastdom@0.8.6"),t("npm:qwery@3.4.2"),t("github:guardian/native-promise-only@0.7.6-e"),t("common/utils/$"),t("common/utils/_"),t("common/utils/config"),t("common/modules/commercial/create-ad-slot"),t("common/modules/user-prefs"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/third-party-tags/imr-worldwide",["common/utils/config"],!1,function(t,e,n){return function(t){function e(){if(t.switches.imrWorldwide){var e=new Image;return e.src=["//secure-uk.imrworldwide.com/cgi-bin/m?ci=uk-305078h&cg=0&cc=1&ts=compact","&si=",encodeURI(window.location.href),"&rp=",encodeURI(document.referrer),"&rnd=",(new Date).getTime()].join(""),e}}return{load:e}}.call(this,t("common/utils/config"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/third-party-tags/remarketing",["common/utils/config"],!1,function(t,e,n){return function(t){function e(){return t.switches.remarketing?require(["js!"+n],function(){window.google_trackConversion({google_conversion_id:971225648,google_custom_params:window.google_tag_params,google_remarketing_only:!0})}):void 0}var n="http://www.googleadservices.com/pagead/conversion_async.js";return{load:e}}.call(this,t("common/utils/config"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/third-party-tags/outbrain",["common/utils/$","common/utils/config","common/utils/detect"],!1,function(t,e,n){return function(t,e,n){function o(){if(e.switches.outbrain){var o={mobile:"MB_2",tablet:"MB_1",desktop:"AR_11",wide:"AR_11"};return t(".OUTBRAIN").first().attr("data-widget-id",o[n.getBreakpoint()]),require(["js!"+i])}}var i="http://widgets.outbrain.com/outbrain.js";return{load:o}}.call(this,t("common/utils/$"),t("common/utils/config"),t("common/utils/detect"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/third-party-tags/gravity",["common/utils/config","common/utils/cookies"],!1,function(t,e,n){return function(t,e){function n(){var t=e.get("grvinsights");return null===t?"":t}function o(){return t.switches.gravity?require(["js!https://secure-api.gravity.com/v1/beacons/log?site_guid=14b492cf6727dd1ab3a6efc7556b91bc&action=beacon&user_guid="+n()+"&referrer="+document.referrer+"&browser_useragent="+navigator.userAgent+"&href="+location.href+"&url="+[location.protocol,"//",location.host,location.pathname].join("")+"&article_title="+document.title+"&type=content&section_id="+t.page.section]):void 0}function i(){return t.switches.gravity&&"Article"===t.page.contentType?require(["js!https://secure-api.gravity.com/v1/api/intelligence/wl?jq=&sg=14b492cf6727dd1ab3a6efc7556b91bc&ug="+n()+"&id=gravity&pl=127&type=iframe"]):void 0}return{lightBeacon:o,getRecommendations:i}}.call(this,t("common/utils/config"),t("common/utils/cookies"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/third-party-tags/taboola",["common/utils/config"],!1,function(t,e,n){return function(t){function e(){t.switches.taboola&&(window._taboola=window._taboola||[],window._taboola.push({article:"auto"}),require(["js!//cdn.taboola.com/libtrc/theguardian/loader.js"]),window._taboola.push({mode:"thumbnails-a",container:"taboola",placement:"Below Article Thumbnails",target_type:"mix"}),window._taboola.push({flush:!0}))}return{load:e}}.call(this,t("common/utils/config"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/third-party-tags",["github:guardian/native-promise-only@0.7.6-e","common/utils/config","common/utils/mediator","common/modules/commercial/third-party-tags/audience-science-gateway","common/modules/commercial/third-party-tags/imr-worldwide","common/modules/commercial/third-party-tags/remarketing","common/modules/commercial/third-party-tags/krux","common/modules/commercial/third-party-tags/outbrain","common/modules/commercial/third-party-tags/gravity","common/modules/commercial/third-party-tags/taboola"],!1,function(t,e,n){return function(t,e,n,o,i,s,r,a,c,l){function u(){if("Identity"===e.page.contentType||"identity"===e.page.section)return!1;switch(e.page.edition.toLowerCase()){case"uk":o.load()}if(e.switches.thirdPartiesLater){var i=setTimeout(d,1e3);n.once("modules:commercial:dfp:rendered",function(){d(),clearTimeout(i)})}else d();return c.lightBeacon(),t.resolve(null)}function d(){i.load(),s.load(),a.load(),r.load(),c.getRecommendations(),l.load()}return{init:u}}.call(this,t("github:guardian/native-promise-only@0.7.6-e"),t("common/utils/config"),t("common/utils/mediator"),t("common/modules/commercial/third-party-tags/audience-science-gateway"),t("common/modules/commercial/third-party-tags/imr-worldwide"),t("common/modules/commercial/third-party-tags/remarketing"),t("common/modules/commercial/third-party-tags/krux"),t("common/modules/commercial/third-party-tags/outbrain"),t("common/modules/commercial/third-party-tags/gravity"),t("common/modules/commercial/third-party-tags/taboola"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/article-aside-adverts",["github:wilsonpage/fastdom@0.8.6","github:guardian/native-promise-only@0.7.6-e","common/utils/_","common/utils/$","common/utils/$css","common/utils/config","common/modules/commercial/create-ad-slot"],!1,function(t,e,n){return function(t,e,n,o,i,s,r){function a(a){var c,l,u,d,m=n.defaults(a||{},{columnSelector:".js-secondary-column",adSlotContainerSelector:".js-mpu-ad-slot"}),p=o(m.columnSelector),h=p.length&&"none"===i(p,"display");return s.switches.standardAdverts&&/Article|LiveBlog/.test(s.page.contentType)&&!h?(c="Article"===s.page.contentType?o(".js-content-main-column"):!1,u=o(".js-components-container",".js-secondary-column"),d=o(m.adSlotContainerSelector),new e(function(e){t.read(function(){l=!c.length||"football"!==s.page.section&&c.dim().height>=1300||"football"===s.page.section&&c.dim().height>=2200?"right-sticky":c.dim().height>=600?"right":"right-small",t.write(function(){"Article"===s.page.contentType&&"advertisement-features"===s.page.sponsorshipType&&u.addClass("u-h"),d.append(r(l,"mpu-banner-ad")),e(d)})})})):!1}return{init:a}}.call(this,t("github:wilsonpage/fastdom@0.8.6"),t("github:guardian/native-promise-only@0.7.6-e"),t("common/utils/_"),t("common/utils/$"),t("common/utils/$css"),t("common/utils/config"),t("common/modules/commercial/create-ad-slot"))})}(),function(){function t(){}t.amd={},System.register("common/modules/commercial/article-body-adverts",["github:wilsonpage/fastdom@0.8.6","github:guardian/native-promise-only@0.7.6-e","common/utils/_","common/utils/$","common/utils/config","common/utils/detect","common/modules/article/spacefinder","common/modules/commercial/create-ad-slot","common/modules/experiments/ab"],!1,function(t,e,n){return function(t,e,n,o,i,s,r,a,c){function l(){return{minAbove:s.isBreakpoint({max:"tablet"})?300:700,minBelow:300,selectors:{" > h2":{minAbove:"mobile"===s.getBreakpoint()?20:0,minBelow:250}," > *:not(p):not(h2)":{minAbove:35,minBelow:400}," .ad-slot":{minAbove:500,minBelow:500}}}}function u(){var t=n.cloneDeep(l());return t.minAbove=300,t.selectors[" > h2"].minAbove=20,t}function d(){var t=n.cloneDeep(l());return t.selectors[" .ad-slot"]={minAbove:1300,minBelow:1300},t}function m(){return r.getParaWithSpace(d()).then(function(t){return"undefined"==typeof t?e.resolve(null):(f.push(["inline-extra"+h.length,"inline"]),g(t).then(function(){return m()}))})}function p(){var t=c.getParticipations().MtRec1,e=c.getParticipations().MtRec2;return c.testCanBeRun("MtRec1")&&t&&"A"===t.variant||c.testCanBeRun("MtRec2")&&e&&"A"===e.variant}var h=[],f=[["inline1","inline"],["inline2","inline"]],g=function(n){if(n){var i=f[h.length],s=o.create(a(i[0],i[1]));return h.push(s),new e(function(e){t.write(function(){s.insertBefore(n),e(null)})})}return e.resolve(null)},v=function(){var t,n,o;return!i.switches.standardAdverts||"Article"!==i.page.contentType||i.page.isLiveBlog?!1:(t=l(),n=u(),i.page.hasInlineMerchandise?(f.unshift(["im","im"]),o=r.getParaWithSpace(n).then(function(t){return g(t)})):o=e.resolve(null),p()&&i.switches.commercialExtraAds?o.then(function(){return r.getParaWithSpace(t).then(function(t){return g(t)}).then(function(){return r.getParaWithSpace(t).then(function(t){return g(t)}).then(function(){return m()})})}):o.then(function(){return r.getParaWithSpace(t).then(function(t){return g(t)}).then(function(){return s.isBreakpoint({max:"tablet"})?r.getParaWithSpace(t).then(function(t){return g(t)}):e.resolve(null)})}))};return{init:v,getRules:l,getLenientRules:u,reset:function(){h=[]}}}.call(this,t("github:wilsonpage/fastdom@0.8.6"),t("github:guardian/native-promise-only@0.7.6-e"),t("common/utils/_"),t("common/utils/$"),t("common/utils/config"),t("common/utils/detect"),t("common/modules/article/spacefinder"),t("common/modules/commercial/create-ad-slot"),t("common/modules/experiments/ab"))})}(),function(){function t(){}t.amd={},System.register("bootstraps/commercial",["github:guardian/native-promise-only@0.7.6-e","common/utils/config","common/utils/mediator","common/utils/robust","common/utils/_","common/modules/commercial/article-aside-adverts","common/modules/commercial/article-body-adverts","common/modules/commercial/badges","common/modules/commercial/comment-adverts","common/modules/commercial/dfp","common/modules/commercial/front-commercial-components","common/modules/commercial/msie-audit","common/modules/commercial/slice-adverts","common/modules/commercial/third-party-tags","common/modules/user-prefs"],!1,function(t,e,n){return function(t,e,n,o,i,s,r,a,c,l,u,d,m,p,h){var f=[["cm-articleAsideAdverts",s],["cm-articleBodyAdverts",r],["cm-sliceAdverts",m],["cm-frontCommercialComponents",u],["cm-commentAdverts",c],["cm-thirdPartyTags",p],["cm-badges",a]];return{init:function(){d.init();var s=[];h.isOff("adverts")||e.page.shouldHideAdverts||e.page.isSSL&&"admin"!==e.page.section||window.location.hash.match(/[#&]noads(&.*)?$/)||(i.forEach(f,function(t){o(t[0],function(){s.push(t[1].init())})}),t.all(s).then(function(){e.switches.commercial&&(o("cm-dfp",function(){l.init()}),o("cm-ready",function(){n.emit("page:commercial:ready")}))}))}}}.call(this,t("github:guardian/native-promise-only@0.7.6-e"),t("common/utils/config"),t("common/utils/mediator"),t("common/utils/robust"),t("common/utils/_"),t("common/modules/commercial/article-aside-adverts"),t("common/modules/commercial/article-body-adverts"),t("common/modules/commercial/badges"),t("common/modules/commercial/comment-adverts"),t("common/modules/commercial/dfp"),t("common/modules/commercial/front-commercial-components"),t("common/modules/commercial/msie-audit"),t("common/modules/commercial/slice-adverts"),t("common/modules/commercial/third-party-tags"),t("common/modules/user-prefs"))})}();